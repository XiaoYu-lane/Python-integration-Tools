<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入vue和tdesign-ui库 -->
    <link rel="stylesheet" href="https://unpkg.com/tdesign-vue/dist/tdesign.min.css" />
    <script src="https://unpkg.com/vue@2.6/dist/vue.js"></script>
    <script src="static/js/Vue-2.6.14.js"></script>
    <script src="https://unpkg.com/@vue/composition-api@1.7.0/dist/vue-composition-api.prod.js"></script>
    <script src="https://unpkg.com/tdesign-vue/dist/tdesign.min.js"></script>
    <link rel="stylesheet" href="static/css/menu.css">
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/index.css">
    <script src="static/js/ajax.js"></script>
    <title>主页</title>
</head>

<body>
    <div id="app">
        <t-layout>
            <t-header class="pywebview-drag-region">
                <div class="tdesign-demo-item--grid menu-row">
                    <t-row
                        :gutter="[{ xs: 8, sm: 16, md: 24, lg: 32, xl: 32, xxl: 40 },{ xs: 8, sm: 16, md: 24, lg: 32, xl: 32, xxl: 40 }]"
                        justify="space-around">
                        <t-col :span="3" style="text-align: left; margin-top: -10px;">
                            <div>
                                <img src="static/img/logo.png" alt="logo" width="15px" height="15px">
                                Moyu-tools
                            </div>
                        </t-col>
                        <t-col :span="2">
                            
                            <div>
                                <t-button variant="outline" block @click="setting">设置</t-button>
                            </div>
                        </t-col>
                        <t-col :span="2">
                            <div>
                                <t-button variant="outline" block>编辑</t-button>
                            </div>
                        </t-col>
                        <t-col :span="2">
                            <div>
                                <t-button variant="outline" block>帮助</t-button>
                            </div>
                        </t-col>
                        <t-col :span="1">
                            <div>
                                <t-switch size="large" :label="['夜', '日']" @change="$changeTheme"></t-switch>
                            </div>
                        </t-col>
                        <t-col :span="1">
                            <div style="margin: -15px -30px 0 0;">
                                <t-icon name="remove" @click="$minimize" size="large" />
                            </div>
                        </t-col>
                        <t-col :span="1">
                            <div style="margin: -15px 0 0 0;">
                                <t-icon name="close" @click="$quitWindow" size="large" />
                            </div>
                        </t-col>
                        
                    </t-row>
                    <hr>
                </div>

            </t-header>
            <t-content>
                <h1>欢迎使用MoYu-tools</h1>
                <t-divider></t-divider>
                <t-input label="保存文件路径：" :value="save_folder" style="max-width: 1000px" auto-width />
                <t-divider></t-divider>
                <t-input label="url：" :value="request_url" style="max-width: 1000px" auto-width />
            </t-content>
            <t-footer>Footer</t-footer>
        </t-layout>
    </div>
</body>
<script>
    // 把头部菜单栏注册为全局组件
    Vue.component('menu-bar', {
        template:
            `<div class="tdesign-demo-item--grid menu-row">
                    <t-row
                        :gutter="[{ xs: 8, sm: 16, md: 24, lg: 32, xl: 32, xxl: 40 },{ xs: 8, sm: 16, md: 24, lg: 32, xl: 32, xxl: 40 }]">
                        <t-col :span="2">
                            <div>设置</div>
                        </t-col>
                        <t-col :span="2">
                            <div>编辑</div>
                        </t-col>
                        <t-col :span="2">
                            <div>帮助</div>
                        </t-col>
                        <t-col :span="2">
                            <div>退出</div>
                        </t-col>
                        <t-col :span="4">
                            <div>
                                <t-switch size="large" :label="['开', '关']"></t-switch>
                            </div>
                        </t-col>
                    </t-row>
                    <hr>
                </div>`
    });
    // 使用TDesign
    Vue.use(TDesign);
    // 定义全局方法，用于顶部菜单栏
    // 退出程序
    Vue.prototype.$quitWindow = function () {
        
        pywebview.api.quit();
    }
     // 深浅色主题切换
    Vue.prototype.$changeTheme = function (obj) {
       
        if (obj) {
            document.documentElement.setAttribute('theme-mode', 'dark');
        }
        else {
            document.documentElement.removeAttribute('theme-mode');
        }
    }
    // 程序窗口最小化
    Vue.prototype.$minimize = function() {
        pywebview.api.minimize();
    }
    // 程序设置窗口
    // Vue.prototype.$createNewWin = function(obj){
    //     pywebview.api.create_win(obj.target.innerHTML);
    // }
    const vue = new Vue({
        el: '#app',
        data() {
            return {
                save_folder: '',
                request_url: ''
            }
        },
        methods: {
            // 设置
            setting() {
                pywebview.api.url_option('setting');
            }
        }
    })
</script>

</html>